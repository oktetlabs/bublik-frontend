"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[442],{85442:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_e});r(75751),r(67859);var o=r(52983),a=r(68109),n=r(56167),l=r(83885),s=r(96962),i=r(38125),d=r(25673),c=r(32131),u=r(36193),h=r(13657),m=r(56723),f=r(16559),p=r(98926);const b=(0,o.createContext)(void 0),g=e=>{const{columnId:t,mode:r,dates:a,sortBy:n,children:l}=e,[,s]=(0,u.XN)(),i=(0,o.useCallback)((e=>{s((r=>(0,f.ZP)(r,(r=>{"column-1"===t&&(r.columnOneSorting=e.sortBy),"column-2"===t&&(r.columnTwoSorting=e.sortBy)}))))}),[t,s]);return(0,p.tZ)(b.Provider,{value:{mode:r,dates:a,sortBy:n,onColumnSortChange:i},children:l})},x=()=>{const e=(0,o.useContext)(b);if(!e)throw new Error("useColumn must be used inside ColumnProvider");return e},y=(0,o.createContext)(void 0),v=e=>{const{header:t,children:r}=e;return(0,p.tZ)(y.Provider,{value:{header:t},children:r})};r(94641);var w=r(45502);const Z=(e,t)=>{switch(e){case"tree":return`/log/${t}?mode=treeAndinfoAndlog`;case"runs":return`/runs/${t}`;default:return`/${e}/${t}`}},C=({value:e=0,to:t="",params:r,hasAbsoluteURL:o,backgroundColor:a,children:n})=>o?(0,p.tZ)(h.u,{content:e,delay:[400,0],children:(0,p.tZ)("a",{className:"py-0.5 px-2 truncate rounded bg-badge-0",target:"__blank",href:t,children:n})}):(0,p.tZ)(h.u,{content:e.toString(),delay:[400,0],children:(0,p.tZ)(w.rU,{className:`py-0.5 px-2 truncate rounded ${a}`,to:Z(t,r),children:n})});r(14209);const k=e=>(0,p.tZ)("div",Object.assign({className:"flex flex-col px-6 py-4 mb-1 bg-white rounded-t-xl"},e,{children:(0,p.BX)("div",{className:"flex flex-wrap justify-between gap-2",children:[(0,p.BX)("div",{className:"flex flex-wrap items-stretch justify-center gap-6",children:[(0,p.tZ)(me,{}),(0,p.tZ)(Ze,{}),(0,p.tZ)(we,{})]}),(0,p.BX)("div",{className:"flex flex-wrap items-stretch justify-center gap-6",children:[(0,p.tZ)(ie,{}),(0,p.tZ)(ue,{})]})]})}));var S=r(50358),N=r(72733);const j=["label"],R=(0,o.forwardRef)(((e,t)=>{let{label:r="Placeholder"}=e,o=(0,S.Z)(e,j);return(0,p.BX)("label",{htmlFor:"toggle-switch",className:"flex items-center justify-center gap-3 cursor-pointer rounded-lg px-3 text-[0.875rem] leading-[1.5rem] font-medium border border-border-primary",ref:t,children:[(0,p.tZ)(N.fC,Object.assign({className:"w-[26px] h-4 bg-border-primary rounded-full relative rdx-state-checked:bg-primary"},o,{id:"toggle-switch",children:(0,p.tZ)(N.bU,{className:"block w-3 h-3 bg-primary rounded-full transition-all translate-x-0.5 will-change-transform rdx-state-checked:translate-x-3 rdx-state-checked:bg-white"})})),r]})})),B=()=>(0,p.tZ)(h.uv,{offset:60}),P=(0,o.memo)((({time:e})=>(0,p.tZ)(h.SU,{time:e}))),D=e=>(0,p.tZ)("button",Object.assign({className:"relative inline-flex items-center justify-center transition-all appearance-none select-none whitespace-nowrap py-[7px] px-3 text-[0.875rem] font-medium leading-[1.5rem] rounded-lg border border-border-primary"},e,{children:"Today"})),_=(0,o.memo)((({onCheckChange:e})=>(0,p.tZ)(h.u,{content:"Reload page every 30 seconds",placement:"bottom",offset:[0,15],animation:"shift-toward",children:(0,p.tZ)(R,{label:"Auto reload",onCheckedChange:e})}))),M=({value:e})=>e?(0,p.tZ)(h.u,{content:e,delay:[400,0],children:(0,p.tZ)("span",{className:"truncate",children:e})}):null;r(3107);const $=e=>{const t={};let r=0;for(const[o,a]of Object.entries(e.rowCells))Array.isArray(a)||(O(a)||I(a))&&r<=9&&(t[o]=`bg-badge-${r}`,r++);return t},O=e=>{var t;return!(null==(t=e.payload)||!t.url)},I=e=>{var t;return!(null==(t=e.payload)||!t.params)},E=e=>{var t,r,o,a;const n=(null==(t=e.payload)||null==(r=t.url)?void 0:r.startsWith("https://"))||!1,l=(null==(o=e.payload)||null==(a=o.url)?void 0:a.startsWith("http://"))||!1;return n||l},X=e=>{switch(e){case i.vZ.Success:return"#e8fadc";case i.vZ.Warning:return"#ffe8ca";case i.vZ.Error:return"#ff9ca8";default:return"#f0f0f0"}},L=({cell:e,headerKey:t,colorMap:r})=>{var o,a;const n=e.row.original.rowCells[t];if(Array.isArray(n))return(0,p.tZ)(M,{value:e.value});const l=((e,t,r)=>e.context?X(e.context):r.column.key&&r.column.key in t?t[r.column.key]:"bg-badge-0")(n,r,e),s=O(n),i=E(n);return s?(0,p.tZ)(C,{value:n.value,to:null==(o=n.payload)?void 0:o.url,params:null==(a=n.payload)?void 0:a.params,hasAbsoluteURL:i,backgroundColor:l,children:n.value}):(0,p.tZ)(M,{value:n.value})};var A=r(36644);r(90142);const H=e=>e?"nok":"ok",F=e=>{const t=e.map(H).reduce(((e=0)=>(t,r,o,a)=>{const n=0===o,l=o+1===a.length,s=a[o-1];let i;if(n)return t;if(l)return s!==r?(i=[a.slice(e,o),a.slice(-1)],[...t,...i]):[...t,a.slice(e,o+1)];if(s!==r){const r=[...t,a.slice(e,o)];return e=o,r}return t})(),[]);const r=t.reduce(((e,t)=>e+t.length),0);return t.map((e=>t=>({status:t[0],basis:Math.ceil(t.length/e*100)}))(r))};const Q={name:"ydhn17",styles:"&:before{content:'';display:block;position:absolute;left:0px;top:0;height:8px;width:150px;background:linear-gradient(\n      to right,\n      transparent 0%,\n      #ffffff 50%,\n      transparent 100%\n    );animation:load 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;@keyframes load{from{left:-250px;}to{left:100%;}}}"},T=(0,A.Z)("div",{target:"e1852ajj0"})("position:relative;border-radius:10px;opacity:0.7;height:8px;overflow:hidden;background-color:",(({status:e,isFetching:t})=>((e,t)=>e?"#aeaeb9":t?"ok"===t?"#65cd84":"#f95c78":"#aeaeb9")(t,e)),";flex-basis:",(({flexBasis:e})=>e&&e),"%;",(({isFetching:e})=>e&&Q),";"),z=({runId:e})=>{const{data:t,isFetching:r,isError:o}=(0,d.Pm)(e);return(0,p.BX)(p.HY,{children:[r&&(0,p.tZ)("div",{className:"relative flex items-center justify-center gap-1",children:(0,p.tZ)(T,{flexBasis:100,isFetching:r})}),t&&(0,p.tZ)("div",{className:"relative flex items-center justify-center gap-1",children:F(t).map(((e,t)=>(0,p.tZ)(T,{flexBasis:e.basis,status:e.status,isFetching:r},t)))}),o&&(0,p.tZ)("div",{className:"flex items-center justify-center",children:(0,p.tZ)("span",{className:"leading-[1.5rem] text-[0.875rem]",children:"Something went wrong..."})})]})},U="component_sub-row__1A3XH",W=e=>{const{runId:t,colorMap:r,descriptionMap:o,rowCells:a,runStatus:n}=e,l=(0,h.Or)(n);return(0,p.BX)("div",{className:`py-2.5 pr-2.5 pl-7 before:w-6 before:h-[calc(100%+7px)] before:absolute before:top-0 before:left-0 before:transform before:-translate-x-px before:-translate-y-1.5 before:bg-[var(--bg-color)] before:rounded-bl-md ${U}`,style:{"--bg-color":l},children:[(0,p.tZ)("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(a).map((([e,t])=>{var a,n;if(Array.isArray(t))return null;if(!O(t))return null;const l=E(t),s=((e,t)=>e in t?t[e]:"")(e,o);return(0,p.BX)(C,{value:t.value,to:null==(a=t.payload)?void 0:a.url,params:null==(n=t.payload)?void 0:n.params,hasAbsoluteURL:l,backgroundColor:r[e],children:[t.value," - ",s]},e)}))}),t&&n!==i.RG.Running&&(0,p.tZ)(z,{runId:t})]})},Y=({runStatus:e})=>{const{icon:t,color:r,bg:o,label:a}=(0,h.Vj)(e);return(0,p.tZ)(h.u,{content:`Conclusion: ${a}`,placement:"top",delay:[400,0],children:(0,p.tZ)("div",{className:`flex items-center justify-center w-full h-full rounded-l-md ${r} ${o}`,children:t})})};var G=r(54231),J=r(13819),K=r(18294);const V=(e,t,r)=>{const o=q(e,t),a=Math.max(o,r.length);return Math.min(400,14*a+128)},q=(e,t)=>e.reduce(((e,r)=>{var o,a,n;const l=r.rowCells[t];if(Array.isArray(l))return Math.max(e,ee(l).length);const s=null!=(o=null==(a=l.value)||null==(n=a.toString())?void 0:n.length)?o:0;return Math.max(e,s)}),0),ee=e=>e.map((e=>e.value)).filter((e=>e)).join(", "),te=e=>t=>{const r=t.rowCells[e];return Array.isArray(r)?ee(r):r.value||""},re={id:"test-status",minWidth:24,width:24,maxWidth:24,Header:()=>null,accessor:e=>e.context.conclusion,Cell:e=>(0,p.tZ)(Y,{runStatus:e.value}),columnCSS:{marginRight:"4px",transform:"translate(-1px, -1px)",height:"calc(100% + 1px)",marginLeft:"0px"},disableSortBy:!0},oe={Header:()=>null,id:"expander",Cell:({row:e})=>(0,p.tZ)("button",Object.assign({className:(0,h.m6)("text-primary hover:bg-primary-wash rounded",e.isExpanded&&"bg-primary text-white hover:bg-primary hover:text-white")},e.getToggleRowExpandedProps(),{children:(0,p.tZ)(K.P.ShowMore24x24,{})})),width:24,minWidth:24,columnCSS:{justifyContent:"flex-end",marginRight:"4px"}},ae=e=>{const t=((e,t,r)=>{const o=$((0,G.I2)(t));return e.map((e=>{const a=(0,J.camelize)(e.key),n=a in r?r[a]:"";return{key:a,Header:e.name,id:a,accessor:te(a),Cell:e=>(0,p.tZ)(L,{cell:e,headerKey:a,colorMap:o}),cellTagColor:o[a],cellMetaDescription:n,width:V(t,a,e.name),sortDescFirst:!0}}))})(e.header,e.rows,e.payload);return[re,...t,oe]},ne=(e,{row:t})=>[e,{style:{backgroundColor:t.original.context.conclusion===i.RG.Error?"#ffc3c3":"#ffffff"}}],le=({row:e})=>{const t=$(e.original),r=(e=>{const t={};return e.allCells.forEach((e=>{e.column.cellMetaDescription&&e.column.key&&(t[e.column.key]=e.column.cellMetaDescription)})),t})(e);return(0,p.tZ)(W,{runId:e.original.context.runId,colorMap:t,descriptionMap:r,rowCells:e.original.rowCells,runStatus:e.original.context.conclusion})},se=(0,o.memo)((e=>{const{data:t,todayData:r,date:a,mode:n,isFetching:l,isError:s,sortBy:i,shouldOverrideSort:d,onStateChange:c,onTableDateChange:u,shouldShowHeader:m,headerRef:f,doubleHeader:b,splitBody:g,globalSearch:x,errorStatus:y}=e,v=(0,o.useMemo)((()=>({sortBy:i})),[i]),w=(0,o.useMemo)((()=>t?ae(t):r?ae(r):[]),[t,r]),Z=(0,o.useMemo)((()=>(e=>({header:{position:"sticky",top:0,flexGrow:1,zIndex:10},headerRow:{height:"34px"},headerCell:{display:"flex",alignItems:"center",justifyContent:"flex-start",margin:"0 1px",overflow:"hidden"},headerCustomRow:{top:"columns"===e?"34px":"116px",position:"sticky",zIndex:10,display:"grid",placeItems:"center",borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",paddingTop:"4px",backgroundColor:"#ffffff","&::before":{position:"absolute",content:'""',top:0,width:"100%",height:"4px",backgroundColor:"#f5f5f5"}},bodyRow:{height:"34px",backgroundColor:"#ffffff",borderTop:"1px solid transparent",borderLeft:"1px solid transparent",borderRight:"1px solid transparent"},bodyCell:{display:"flex",alignItems:"center",justifyContent:"flex-start",margin:"0 1px"}}))(n)),[n]),C=(0,o.useMemo)((()=>t?t.rows:[]),[t]),k=(0,o.useMemo)((()=>a?new Date(a):null!=t&&t.date?new Date(t.date):new Date),[t,a]),S=(0,o.useCallback)(((e,t)=>d?Object.assign({},e,{globalFilter:x,sortBy:i}):Object.assign({},e,{globalFilter:x})),[d,x,i]),N=(0,o.useMemo)((()=>(0,p.tZ)(h.$j,{className:"h-screen"})),[]),j=(0,o.useMemo)((()=>(0,p.tZ)(h.Gc,{date:k,onChange:u})),[k,u]),R=(0,o.useMemo)((()=>{const e=(0,G.e$)(y);return(0,p.tZ)(h.rJ,{header:`${y}`||"Something went wrong",message:e})}),[y]);return(0,p.tZ)(h.iA,{columns:w,data:C,emotionBaseTableCSS:Z,isFetching:l,isError:s,spinner:N,onStateChange:c,renderRowSubComponent:le,getRowProps:ne,customHeaderRow:j,errorComponent:R,initialState:v,multiSortEnabled:!0,autoResetSortBy:!1,useControlledState:S,showHeader:m,headerPortalRef:f,doubleHeader:b,splitBody:g,topBorder:!0})})),ie=()=>{const e=(0,a.I0)(),t=(0,m.$Q)(m.fI),{invalidateDates:r}=(0,m.Av)(),n=(0,o.useCallback)((o=>{if(e((0,m.Ro)(o)),o){e((0,m.EL)(new Date));const o=t.map((e=>new Date(e)));r(o)}}),[e,t,r]);return(0,p.tZ)(_,{onCheckChange:n})};r(41874);var de=r(87517),ce=r(62432);const ue=()=>{const e=(0,a.I0)(),t=(0,m.$Q)(m.fI),r=(0,m.$Q)(m.MH),n=(0,m.$Q)(m.Lz),{invalidateDates:l}=(0,m.Av)(),s=(0,o.useMemo)((()=>new Date(n)),[n]);return(0,c.Yz)((()=>{if(!r)return;const o=t.map((e=>new Date(e))).filter(de.Z);e((0,m.EL)(new Date)),l(o)}),ce.vc.dashboardPollingTimer),(0,p.tZ)(P,{time:s})},he=e=>{const{searchTerm:t,onTermChange:r}=e,[a,n]=(0,o.useState)(t),l=(0,c.Nr)(a,500);return(0,o.useEffect)((()=>{r(l)}),[l]),(0,p.tZ)(h.E1,{value:a,autoComplete:"off",placeholder:"Search...",onChange:e=>n(e.target.value)})},me=()=>{const[e,t]=(0,u.XN)({type:"replace"}),r=(0,o.useRef)(!0);(0,o.useEffect)((()=>{r.current=!1}),[]);const a=(0,o.useCallback)((e=>{r.current||t((t=>Object.assign({},t,{searchTerm:e})))}),[t]);return(0,p.tZ)(he,{searchTerm:e.searchTerm||"",onTermChange:a})};var fe=r(78445),pe=r(54546),be=r(31434),ge=r(79206);const xe=ge.fC,ye=ge.ck,ve=(0,o.memo)((e=>(0,p.BX)(xe,Object.assign({className:"flex","aria-label":"Dashboard mode"},e,{children:[(0,p.tZ)(ye,{className:"px-[0.625rem] border-y border-y-border-primary rounded-l-lg border-l border-l-border-primary text-border-primary flex items-center justify-center cursor-pointer hover:text-primary rdx-state-on:text-primary focus-visible:shadow-[0_0_0_2px_rgba(98_126_251_0.75)]",value:i.Pk.Rows,"aria-label":"Mode rows",children:(0,p.tZ)(K.P.ModeRows24x24,{})}),(0,p.tZ)(ye,{className:"px-[0.625rem] border-y border-y-border-primary text-border-primary flex items-center justify-center cursor-pointer hover:text-primary rdx-state-on:text-primary focus-visible:shadow-[0_0_0_2px_rgba(98_126_251_0.75)]",value:i.Pk.RowsLine,"aria-label":"Mode rows line",children:(0,p.tZ)(K.P.ModeRowsLine24x24,{})}),(0,p.tZ)(ye,{className:"px-[0.625rem] border-y border-y-border-primary rounded-r-lg border-r border-r-border-primary text-border-primary flex items-center justify-center cursor-pointer hover:text-primary rdx-state-on:text-primary focus-visible:shadow-[0_0_0_2px_rgba(98_126_251_0.75)]",value:i.Pk.Columns,"aria-label":"Mode columns",children:(0,p.tZ)(K.P.ModeColumns24x24,{})})]})))),we=()=>{const e=(0,a.I0)(),[,t]=(0,u.XN)(),[r,{data:n}]=(0,d.mL)(),l=(0,m.$Q)(m.IO);(0,o.useEffect)((()=>{if(n||r(void 0,!0),n&&!l){const{days:t,columns:r}=n,o=((e,t)=>{let r;return r=1===e&&1===t?i.Pk.Rows:1===e&&2===t?i.Pk.RowsLine:2===e&&2===t?i.Pk.Columns:i.Pk.RowsLine,r})(t,r);e((0,m.Cf)(o))}}),[n,e,l,r]);const s=(0,o.useCallback)((e=>{t((t=>(0,f.ZP)(t,(r=>{const o=Object.entries(t.dates||{}).length>1,a="rows"===e||"rows-line"===e;if(o&&a){const e=Object.entries(t.dates||{}).map((([,e])=>new Date(e))),o=(0,pe.Z)(e);if(!(0,de.Z)(o))return;r.dates={[(0,fe.nanoid)(4)]:(0,G.wy)(o)}}if(Object.entries(t.dates||{}).length&&!a){const e=Object.entries(t.dates||{}).map((([,e])=>new Date(e))),o=(0,pe.Z)(e);if(!(0,de.Z)(o))return;r.dates={[(0,fe.nanoid)(4)]:(0,G.wy)((0,be.Z)(o,-1)),[(0,fe.nanoid)(4)]:(0,G.wy)(o)}}r.mode=e}))))}),[t]);return(0,p.tZ)(ve,{type:"single",onValueChange:s,value:l||void 0})},Ze=()=>{const[,e]=(0,u.XN)(),t=(0,m.$Q)(m.IO),{todayDate:r}=d.Ul.endpoints.getDashboard.useQueryState(void 0,{selectFromResult:({data:e})=>({todayDate:(null==e?void 0:e.date)||(0,G.wy)(new Date)})}),a=(0,o.useCallback)((()=>{if(t===i.Pk.Columns){const t={},o=(0,be.Z)(new Date(r),-1);t[(0,fe.nanoid)(4)]=(0,G.wy)(o),t[(0,fe.nanoid)(4)]=r,e((e=>(0,f.ZP)(e,(e=>{e.dates=t}))))}else e((e=>(0,f.ZP)(e,(e=>{e.dates={}}))))}),[t,e,r]);return(0,p.tZ)(D,{onClick:a})};var Ce=r(56712);const ke=(0,o.memo)((({id:e,date:t,shouldOverrideSort:r,shouldShowHeader:n,headerRef:l,onColumnSortChange:s})=>{const c=(0,a.I0)(),[,b]=(0,u.XN)(),g=(0,m.$Q)(m.EP),{mode:y,sortBy:v}=x(),{prefetchForDate:w}=(0,m.Av)(),{data:Z,isFetching:C,isError:k,error:S}=(0,d.k3)(t?{date:t}:Ce.skipToken),{data:N,isFetching:j,isError:R,error:B}=(0,d.oj)();(0,o.useEffect)((()=>{t&&w(new Date(t)),null!=N&&N.date&&w(new Date(N.date))}),[t,w,N]);const P=t?Z:N,D=t?C:j,_=t?k:R,M=t||(null==P?void 0:P.date)||(null==N?void 0:N.date),$=(null==S?void 0:S.status)||(null==B?void 0:B.status),O=S||B?(0,G.e$)($):"",I=(0,o.useCallback)((t=>{const r=e||(0,fe.nanoid)(4),o=(0,G.wy)(t);e?(c((0,m.IX)({id:r,date:o})),b((e=>(0,f.ZP)(e,(e=>{e.dates&&e.dates[r]&&(e.dates[r]=o)}))))):(c((0,m.IX)({id:r,date:o})),b((e=>(0,f.ZP)(e,(e=>Object.assign({},e,{dates:Object.assign({},e.dates,{[r]:o})}))))))}),[c,e,b]);return Z||N||!D?!_||Z||N?(0,p.tZ)(se,{data:P,todayData:N,date:M,mode:y,isFetching:D,isError:_,sortBy:v,onStateChange:s,onTableDateChange:I,shouldOverrideSort:r,shouldShowHeader:n,headerRef:l,doubleHeader:y===i.Pk.RowsLine,splitBody:y===i.Pk.RowsLine,globalSearch:g,errorStatus:$}):(0,p.tZ)(h.rJ,{header:"Something went wrong",message:O}):(0,p.tZ)(h.$j,{className:"h-screen"})})),Se=()=>{const e=(0,o.useRef)(null),t=(()=>{const e=(0,o.useContext)(y);if(!e)throw new Error("Use Page Header should be used inside header provider");return e.header})(),{dates:r,mode:a,onColumnSortChange:n}=x(),l=a===i.Pk.Columns,s=Object.keys(r).length,d=l?e:t;return s?(0,p.BX)(p.HY,{children:[l&&(0,p.tZ)("div",{className:"sticky top-0 z-50 pr-3",ref:e}),(0,p.tZ)("div",{className:l?"pr-3":void 0,children:Object.entries(r).map((([e,t],r)=>{const o=0===r;return(0,p.tZ)(ke,{id:e,date:t,shouldOverrideSort:!o,shouldShowHeader:o,headerRef:d,onColumnSortChange:o?n:void 0},e)}))})]}):(0,p.tZ)("div",{className:l?"pr-3":void 0,children:(0,p.tZ)(ke,{shouldOverrideSort:!1,shouldShowHeader:!0,headerRef:d,onColumnSortChange:n})})};var Ne=r(55052);const je=({children:e})=>(0,p.BX)(Ne.fC,{className:"overflow-hidden h-[calc(100vh-110px)]",children:[(0,p.tZ)(Ne.l_,{className:"w-full h-full rounded-[inherit]",children:e}),(0,p.BX)(Ne.LW,{className:"rdx-orientation-vertical:w-[8px] rdx-orientation-horizontal:flex-col rdx-orientation-horizontal:h-[8px] flex select-none touch-none bg-[rgb(228_228_228)] rounded-[100px] transition-colors",forceMount:!0,orientation:"vertical",children:[(0,p.tZ)(Ne.bU,{className:"flex-1 bg-[rgb(193_196_203)] rounded-[100px] relative before:w-full before:h-full before:absolute before:inset-x-1/2 before:inset-y-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:min-w-[44px] before:min-h-[44px]"})," "]}),(0,p.tZ)(Ne.LW,{className:"rdx-orientation-vertical:w-[8px] rdx-orientation-horizontal:flex-col rdx-orientation-horizontal:h-[8px] flex select-none touch-none bg-[rgb(228_228_228)] rounded-[100px] transition-colors",orientation:"horizontal",children:(0,p.tZ)(Ne.bU,{className:"flex-1 bg-[rgb(193_196_203)] rounded-[100px] relative before:w-full before:h-full before:absolute before:inset-x-1/2 before:inset-y-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:min-w-[44px] before:min-h-[44px]"})}),(0,p.tZ)(Ne.Ns,{className:"bg-transparent"})]}),Re=()=>{const[e,t]=(0,m.$Q)(m.x$),r=(0,m.$Q)(m.LF),a=(0,m.$Q)(m.lA),[,n]=(0,u.XN)(),{todayDate:l}=d.Ul.endpoints.getDashboard.useQueryState(void 0,{selectFromResult:({data:e})=>({todayDate:null==e?void 0:e.date})});return(0,o.useEffect)((()=>{const r=!!Object.keys(e).length,o=!!Object.keys(t).length;if(r&&o)return;if(!l)return;const a={},s=(0,be.Z)(new Date(l),-1);a[(0,fe.nanoid)(4)]=(0,G.wy)(s),a[(0,fe.nanoid)(4)]=l,n((e=>(0,f.ZP)(e,(e=>{e.dates=a}))))}),[]),(0,p.BX)(p.HY,{children:[(0,p.tZ)(g,{mode:"columns",columnId:"column-1",dates:e,sortBy:r,children:(0,p.tZ)(je,{children:(0,p.tZ)(Se,{})})}),(0,p.tZ)(g,{mode:"columns",columnId:"column-2",dates:t,sortBy:a,children:(0,p.tZ)(je,{children:(0,p.tZ)(Se,{})})})]})},Be=()=>{const e=(0,m.$Q)(m.LF),t=(0,m.$Q)(m.v8);return(0,p.tZ)(g,{mode:"rows",columnId:"column-1",dates:t,sortBy:e,children:(0,p.tZ)(Se,{})})},Pe=()=>{const e=(0,m.$Q)(m.LF),t=(0,m.$Q)(m.v8);return(0,p.tZ)(g,{mode:"rows-line",columnId:"column-1",dates:t,sortBy:e,children:(0,p.tZ)(Se,{})})},De=()=>{const e=(0,m.$Q)(m.IO),t=e===i.Pk.Rows,r=e===i.Pk.RowsLine,o=e===i.Pk.Columns;return(0,p.BX)(p.HY,{children:[t&&(0,p.tZ)(Be,{}),r&&(0,p.tZ)(Pe,{}),o&&(0,p.tZ)(Re,{})]})},_e=()=>{(0,c.jr)("Dashboard - Bublik");const e=(0,a.I0)(),t=(0,m.$Q)(m.IO),[r]=(0,u.XN)(),{scrollY:f}=(0,n.M)(),b=(0,l.H)(f,[0,88],["0px","-84px"]),g=(0,o.useRef)(null),x=t===i.Pk.Columns;(0,o.useEffect)((()=>{e((0,m.w8)((0,m.Nj)(r)))}),[e,r]);const{isLoading:y}=d.Ul.endpoints.getDashboard.useQueryState(),{isLoading:w}=d.Ul.endpoints.getDashboardMode.useQueryState(),Z=y||w;return(0,p.BX)("div",{className:"px-2 pb-4",children:[(0,p.BX)(s.E.div,{className:"sticky top-0 z-50 flex flex-col pt-2 bg-bg-body",style:{y:b},children:[(0,p.tZ)(k,{}),(0,p.tZ)("div",{className:"flex gap-1 overflow-auto",ref:g})]}),(0,p.tZ)(v,{header:g,children:Z?(0,p.tZ)(h.$j,{className:"h-screen"}):(0,p.tZ)(s.E.main,{className:(0,h.m6)("grid w-full h-full gap-x-1",x?"grid-cols-2":"grid-cols-1"),style:{y:b},children:(0,p.tZ)(De,{})})}),!x&&(0,p.tZ)(B,{})]})}}}]);