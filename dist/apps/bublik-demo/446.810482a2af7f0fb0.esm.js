"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[446],{21446:(t,e,a)=>{a.r(e),a.d(e,{default:()=>O});var n=a(35562),i=a(69175),r=(a(75751),a(67859),a(12459),a(51811),a(94641),a(14209),a(30910),a(84002),a(75044),a(52983)),l=a(67182),s=a(56403),d=a(6563),o=a(67912),c=a(98747),u=a(39636),p=a(71977);const m=()=>(0,p.BX)("div",{className:"flex items-center gap-1",children:[(0,p.tZ)(i.u,{content:"Time zone: UTC",children:(0,p.tZ)(u.P.InfoCircleQuestionMark16x16,{className:"grid place-items-center text-primary"})}),(0,p.tZ)("span",{children:"Dates"})]});var g=a(11095),h=a(45502),x=a(36162);const b=["label","count","percentage","className"],D=t=>{let{label:e,count:a,percentage:n,className:i}=t,r=(0,g.Z)(t,b);const l=n?`(${n}%)`:"(0%)";return(0,p.tZ)(h.rU,Object.assign({className:(0,x.Z)("flex items-center justify-center py-0.5 px-2 border border-transparent rouned-base min-w-[115px] rounded",i)},r,{children:(0,p.BX)("span",{className:"text-[0.75rem] font-medium leading-[1.125rem]",children:[e,": ",a," ",l]})}))},f=({runId:t,totalCount:e,expectedCount:a,expectedPercentage:n,unexpectedCount:i,unexpectedPercentage:r})=>{const l=d._j.run({runId:t});return(0,p.BX)("div",{className:"flex flex-wrap items-start justify-start gap-1",children:[(0,p.tZ)(D,{to:l,label:"Total",count:e,className:"bg-badge-9"}),(0,p.tZ)(D,{to:l,label:"OK",count:a,percentage:n,className:"bg-badge-3"}),(0,p.tZ)(D,{to:l,label:"NOK",count:i,percentage:r,className:"bg-badge-5"})]})},Z=({runId:t})=>(0,p.BX)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.tZ)(o.rU,{variant:o.CT.Primary,iconLeft:"EscapeRight20x20",to:`/log/${t}`,children:"Log"}),(0,p.tZ)(o.rU,{variant:o.CT.Primary,iconLeft:"EscapeRight20x20",to:`/runs/${t}`,children:"Run"})]});var v=a(37122);const C="MMM dd yyyy, HH:mm:ss",y=({start:t,end:e})=>{const a=t?(0,v.Z)(new Date(t),C):null,n=e?(0,v.Z)(new Date(e),C):null;return(0,p.BX)("div",{className:"flex flex-col items-start",children:[(0,p.tZ)("span",{children:a}),(0,p.tZ)("span",{children:n})]})};var w=a(16559);const S=(t,e,a)=>a.length?t.filter((t=>{const e=[...t.original.relevant_tags,...t.original.important_tags,...t.original.metadata];return a.every((t=>e.includes(t)))})):t,B={header:{position:"sticky",top:0,zIndex:1},headerCell:{paddingLeft:8},headerRow:{height:"32px",paddingRight:"24px",borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px"},bodyRow:{overflow:"hidden",backgroundColor:"var(--chakra-colors-bg-primary)"}},k={page:"1",pageSize:"25"},W=()=>{const t=(0,l.I0)(),e=(0,c.Ky)(c.rm),[,a]=(0,d.XN)({type:"window"}),[n,u]=(0,d.XN)({type:"replace"}),{data:g,isFetching:h,isError:x}=(0,s.Ee)(Object.values(n).length?n:k),b=(0,r.useCallback)(((e,a,n)=>{if(!(null==a?void 0:a.includes(e.payload))){const i=[...a||[],e.payload];return t((0,c.AP)(i)),n(i)}const i=a.filter((t=>t!==e.payload));t((0,c.AP)(i)),n(i)}),[t]),D=(0,r.useMemo)((()=>[{id:"runStatus",Header:()=>null,accessor:t=>t.conclusion,Cell:t=>{const{icon:e,bg:a,color:n,label:r}=(0,o.Vj)(t.value);return(0,p.tZ)(i.u,{content:`Conclusion: ${r}`,placement:"right-start",offset:[1,10],arrow:!1,children:(0,p.tZ)(o.kC,{className:"flex-col items-center justify-start w-full h-full pt-3",bg:a,color:n,children:e})})},maxWidth:24,minWidth:24,disableSortBy:!0},{Header:"Actions",accessor:t=>t.id,Cell:t=>(0,p.tZ)(Z,{runId:t.value}),maxWidth:110,minWidth:80,disableSortBy:!0,columnCSS:{paddingRight:"4px","@media (max-width: 1700px)":{maxWidth:80},paddingTop:8,paddingBottom:8,paddingLeft:8}},{Header:()=>(0,p.tZ)(m,{}),id:"Dates",accessor:({start:t,finish:e})=>({start:t,finish:e}),Cell:({cell:t})=>{const{start:e,finish:a}=t.value;return(0,p.tZ)(y,{start:e,end:a})},minWidth:140,maxWidth:170,columnCSS:{paddingRight:"4px","@media (max-width: 1700px)":{maxWidth:140},paddingTop:8,paddingBottom:8}},{Header:"Statistic summary",accessor:t=>({stats:t.stats,runId:t.id}),Cell:t=>{const{stats:e,runId:a}=t.value;return(0,p.tZ)(f,{runId:a,totalCount:e.tests_total,expectedCount:e.tests_total_ok,expectedPercentage:e.tests_total_ok_percent,unexpectedCount:e.tests_total_nok,unexpectedPercentage:e.tests_total_nok_percent})},sortType:(t,e)=>t.original.stats.tests_total_nok>e.original.stats.tests_total_nok?1:-1,maxWidth:400,minWidth:140,sortDescFirst:!0,columnCSS:{paddingRight:"4px",paddingTop:8,paddingBottom:8}},{Header:"Important tags",accessor:t=>t.important_tags.map((t=>({payload:t}))),Cell:t=>(0,p.tZ)(i.k,{badges:t.value,className:"bg-badge-6",selectedBadges:t.state.globalFilter,onBadgeClick:e=>b(e,t.state.globalFilter,t.setGlobalFilter)}),minWidth:100,maxWidth:180,disableSortBy:!0,columnCSS:{"@media (max-width: 2000px)":{maxWidth:180},"@media (max-width: 1700px)":{maxWidth:140},"@media (max-width: 1600px)":{maxWidth:100},paddingRight:"4px",paddingTop:8,paddingBottom:8}},{Header:"Metadata",accessor:t=>t.metadata.map((t=>({payload:t}))),Cell:t=>(0,p.tZ)(i.k,{badges:t.value,className:"bg-badge-4",selectedBadges:t.state.globalFilter,onBadgeClick:e=>b(e,t.state.globalFilter,t.setGlobalFilter)}),minWidth:160,maxWidth:250,disableSortBy:!0,columnCSS:{paddingRight:"4px","@media (max-width: 1800px)":{maxWidth:200},"@media (max-width: 1600px)":{maxWidth:140},"@media (max-width: 1500px)":{maxWidth:100},paddingTop:8,paddingBottom:8}},{Header:"Tags",accessor:t=>t.relevant_tags.map((t=>({payload:t}))),Cell:t=>(0,p.tZ)(i.k,{badges:t.value,selectedBadges:t.state.globalFilter,onBadgeClick:e=>b(e,t.state.globalFilter,t.setGlobalFilter)}),columnCSS:{minWidth:700,"@media (max-width: 2000px)":{minWidth:500},"@media (max-width: 1900px)":{minWidth:400},"@media (max-width: 1800px)":{minWidth:300},"@media (max-width: 1700px)":{minWidth:250},"@media (max-width: 1600px)":{minWidth:100},"@media (max-width: 1500px)":{minWidth:80},"@media (max-width: 1400px)":{minWidth:50},paddingRight:24,paddingTop:8,paddingBottom:8},disableSortBy:!0}]),[b]),v=(0,r.useMemo)((()=>(0,p.tZ)("h1",{children:"Something went wrong..."})),[]),C=(0,r.useCallback)((t=>{a((e=>(0,w.ZP)(e,(e=>{var a;e.runData=null==(a=t.globalFilter)?void 0:a.join(";")}))))}),[a]),W=(0,r.useCallback)(((t,a)=>{const n=e.filter((t=>t));return Object.assign({},t,{globalFilter:n})}),[e]),N=(0,r.useMemo)((()=>{var t;return{globalFilter:(null==(t=n.runData)?void 0:t.split(";"))||e}}),[e,n.runData]),_=(0,r.useMemo)((()=>(0,p.tZ)(i.$j,{className:"h-[82vh]"})),[]),F=n.pageSize?parseInt(n.pageSize):25,P=n.page?parseInt(n.page):parseInt(k.page||"1");return(0,p.BX)("div",{children:[(0,p.tZ)(i.iA,{columns:D,data:(null==g?void 0:g.results)||[],emotionBaseTableCSS:B,spinner:_,isFetching:h,isError:x,errorComponent:v,globalFilter:S,globalFilterValue:e,initialState:N,onStateChange:C,useControlledState:W,autoResetSortBy:!1,headerShadow:!0}),(0,p.tZ)("div",{className:"grid mt-1 place-items-center",children:g&&(0,p.tZ)(i.tl,{totalCount:g.pagination.count,pageSize:F,currentPage:P,siblingCount:2,onPageChange:t=>{u((e=>(0,w.ZP)(e,(e=>{e.startDate=n.startDate||k.startDate,e.page=t.toString()}))))},onPageSizeChange:t=>{u((e=>(0,w.ZP)(e,(e=>{e.pageSize=t.toString()}))))}})})]})};var N=a(6264),_=a(73235),F=a(41874),P=a.n(F),j=a(61661),R=a(2524);const T=(0,_.Z)("button",{target:"e1yd0ahr0"})({name:"19livh",styles:"height:40px;width:40px;display:grid;place-items:center;color:var(--chakra-colors-text-menu);background-color:var(--chakra-colors-bg-body);border-radius:6px;&:hover{color:var(--chakra-colors-accent);}"}),E=t=>{const{onFormChange:e,initialValues:a}=t,[n,s]=(0,r.useState)(a),[,m]=(0,d.XN)(),g=(0,l.I0)(),h=(0,c.Ky)(c.rm);(0,r.useEffect)((()=>{s(Object.assign({},n,{runData:h}))}),[h]);return(0,p.BX)(p.HY,{children:[(0,p.BX)("div",{className:"flex gap-4",children:[(0,p.tZ)(i.Dw,{onChange:t=>{if(Array.isArray(t)&&t[0]&&t[1]){const[e,a]=t,i=Object.assign({},n,{startDate:e.toDate()||null,finishDate:a.toDate()||null});s(i)}},defaultValue:[null,P()()],ranges:{"One week":[P()((0,j.Z)(new Date,-1)),P()()],"Two weeks":[P()((0,j.Z)(new Date,-2)),P()()],"One month":[P()((0,R.Z)(new Date,-1)),P()()],"Three months":[P()((0,R.Z)(new Date,-3)),P()()],"Six months":[P()((0,R.Z)(new Date,-6)),P()()],"One year":[P()((0,R.Z)(new Date,-12)),P()()]}}),(0,p.tZ)(i.XZ,{onBadgesChange:t=>{const e=Object.assign({},n,{runData:t});g((0,c.AP)(t)),s(e)},badges:n.runData}),(0,p.tZ)(o.E1,{placeholder:"Tag expression",onChange:t=>{s(Object.assign({},n,{runDataExpr:t.target.value}))},value:n.runDataExpr})]}),(0,p.BX)("div",{className:"flex gap-4",children:[(0,p.tZ)(T,{onClick:()=>{const t={startDate:void 0,finishDate:void 0,runData:void 0,runDataExpr:void 0};s({startDate:null,finishDate:null,runData:[],runDataExpr:""}),g((0,c.AP)([])),m(t)},"aria-label":"Reset form",children:(0,p.tZ)(u.P.GarbageBin24x24,{})}),(0,p.tZ)(i.zx,{variant:"primary",onClick:()=>e(n),children:"Submit"})]})]})},I=()=>{const t=(0,l.I0)(),[e,a]=(0,d.XN)();(0,r.useEffect)((()=>{e.runData&&t((0,c.AP)(e.runData.split(";")))}),[t,e]);const n=(0,r.useMemo)((()=>{var t;return{startDate:e.startDate?new Date(e.startDate):null,finishDate:e.finishDate?new Date(e.finishDate):new Date,runData:(null==(t=e.runData)?void 0:t.split(";"))||[],runDataExpr:e.runDataExpr||""}}),[e]);return(0,p.tZ)(E,{onFormChange:t=>{const e=t.startDate?(0,v.Z)(t.startDate,N.yJ):"",n=t.finishDate?(0,v.Z)(t.finishDate,N.yJ):"";a({startDate:e,finishDate:n,runData:t.runData.join(";"),runDataExpr:t.runDataExpr,page:"1"})},initialValues:n})},X=()=>(0,p.tZ)("header",{className:"flex items-center justify-start gap-4 px-6 py-4 bg-white rounded-t-xl",children:(0,p.tZ)("div",{className:"flex items-center gap-10",children:(0,p.tZ)(I,{})})}),O=()=>((0,n.jr)("Runs - Bublik "),(0,p.BX)("div",{className:"flex flex-col gap-1 px-2 py-2",children:[(0,p.tZ)(X,{}),(0,p.tZ)(W,{}),(0,p.tZ)(i.uv,{})]}))}}]);