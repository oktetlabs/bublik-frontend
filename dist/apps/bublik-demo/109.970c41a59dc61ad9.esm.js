"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[109],{16109:(t,e,a)=>{a.r(e),a.d(e,{default:()=>R});var n=a(32131),i=a(13657),r=(a(75751),a(67859),a(12459),a(51811),a(94641),a(14209),a(30910),a(84002),a(75044),a(52983)),l=a(68109),s=a(25673),d=a(36193),o=a(58553),c=a(18294),m=a(98926);const u=()=>(0,m.BX)("div",{className:"flex items-center gap-1",children:[(0,m.tZ)(i.u,{content:"Time zone: UTC",children:(0,m.tZ)(c.P.InfoCircleQuestionMark16x16,{className:"grid place-items-center text-primary"})}),(0,m.tZ)("span",{children:"Dates"})]});var p=a(50358),g=a(45502);const h=["label","count","percentage","className"],x=t=>{let{label:e,count:a,percentage:n,className:r}=t,l=(0,p.Z)(t,h);const s=n?`(${n}%)`:"(0%)";return(0,m.tZ)(g.rU,Object.assign({className:(0,i.m6)("flex items-center justify-center py-0.5 px-2 border border-transparent rouned-base min-w-[115px] rounded",r)},l,{children:(0,m.BX)("span",{className:"text-[0.75rem] font-medium leading-[1.125rem]",children:[e,": ",a," ",s]})}))},b=({runId:t,totalCount:e,expectedCount:a,expectedPercentage:n,unexpectedCount:i,unexpectedPercentage:r})=>{const l=d._j.run({runId:t});return(0,m.BX)("div",{className:"flex flex-wrap items-start justify-start gap-1",children:[(0,m.tZ)(x,{to:l,label:"Total",count:e,className:"bg-badge-9"}),(0,m.tZ)(x,{to:l,label:"OK",count:a,percentage:n,className:"bg-badge-3"}),(0,m.tZ)(x,{to:l,label:"NOK",count:i,percentage:r,className:"bg-badge-5"})]})},f=({runId:t})=>(0,m.BX)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,m.tZ)(i.rU,{variant:i.CT.Primary,iconLeft:"EscapeRight20x20",to:d._j.log({runId:t,mode:"treeAndlog"}),children:"Log"}),(0,m.tZ)(i.rU,{variant:i.CT.Primary,iconLeft:"EscapeRight20x20",to:d._j.run({runId:t}),children:"Run"})]});var D=a(37122);const Z="MMM dd yyyy, HH:mm:ss",C=({start:t,end:e})=>{const a=t?(0,D.Z)(new Date(t),Z):null,n=e?(0,D.Z)(new Date(e),Z):null;return(0,m.BX)("div",{className:"flex flex-col items-start",children:[(0,m.tZ)("span",{children:a}),(0,m.tZ)("span",{children:n})]})};var v=a(16559);const w=(t,e,a)=>a.length?t.filter((t=>{const e=[...t.original.relevant_tags,...t.original.important_tags,...t.original.metadata];return a.every((t=>e.includes(t)))})):t,y={header:{position:"sticky",top:0,zIndex:1},headerCell:{paddingLeft:8},headerRow:{height:"32px",paddingRight:"24px",borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px"},bodyRow:{overflow:"hidden",backgroundColor:"#ffffff"}},S={page:"1",pageSize:"25"},B=()=>{const t=(0,l.I0)(),e=(0,o.Ky)(o.rm),[,a]=(0,d.XN)({type:"window"}),[n,c]=(0,d.XN)({type:"replace"}),{data:p,isFetching:g,isError:h}=(0,s.Ee)(Object.values(n).length?n:S),x=(0,r.useCallback)(((e,a,n)=>{if(!(null==a?void 0:a.includes(e.payload))){const i=[...a||[],e.payload];return t((0,o.AP)(i)),n(i)}const i=a.filter((t=>t!==e.payload));t((0,o.AP)(i)),n(i)}),[t]),D=(0,r.useMemo)((()=>[{id:"runStatus",Header:()=>null,accessor:t=>t.conclusion,Cell:t=>{const{icon:e,bg:a,color:n,label:r}=(0,i.Vj)(t.value);return(0,m.tZ)(i.u,{content:`Conclusion: ${r}`,placement:"right-start",offset:[1,10],arrow:!1,children:(0,m.tZ)("div",{className:`flex flex-col items-center justify-start w-full h-full pt-3 ${a} ${n}`,children:e})})},maxWidth:24,minWidth:24,disableSortBy:!0},{Header:"Actions",accessor:t=>t.id,Cell:t=>(0,m.tZ)(f,{runId:t.value}),maxWidth:110,minWidth:80,disableSortBy:!0,columnCSS:{paddingRight:"4px","@media (max-width: 1700px)":{maxWidth:80},paddingTop:8,paddingBottom:8,paddingLeft:8}},{Header:()=>(0,m.tZ)(u,{}),id:"Dates",accessor:({start:t,finish:e})=>({start:t,finish:e}),Cell:({cell:t})=>{const{start:e,finish:a}=t.value;return(0,m.tZ)(C,{start:e,end:a})},minWidth:140,maxWidth:170,columnCSS:{paddingRight:"4px","@media (max-width: 1700px)":{maxWidth:140},paddingTop:8,paddingBottom:8}},{Header:"Statistic summary",accessor:t=>({stats:t.stats,runId:t.id}),Cell:t=>{const{stats:e,runId:a}=t.value;return(0,m.tZ)(b,{runId:a,totalCount:e.tests_total,expectedCount:e.tests_total_ok,expectedPercentage:e.tests_total_ok_percent,unexpectedCount:e.tests_total_nok,unexpectedPercentage:e.tests_total_nok_percent})},sortType:(t,e)=>t.original.stats.tests_total_nok>e.original.stats.tests_total_nok?1:-1,maxWidth:400,minWidth:140,sortDescFirst:!0,columnCSS:{paddingRight:"4px",paddingTop:8,paddingBottom:8}},{Header:"Important tags",accessor:t=>t.important_tags.map((t=>({payload:t}))),Cell:t=>(0,m.tZ)(i.k,{badges:t.value,className:"bg-badge-6",selectedBadges:t.state.globalFilter,onBadgeClick:e=>x(e,t.state.globalFilter,t.setGlobalFilter)}),minWidth:100,maxWidth:180,disableSortBy:!0,columnCSS:{"@media (max-width: 2000px)":{maxWidth:180},"@media (max-width: 1700px)":{maxWidth:140},"@media (max-width: 1600px)":{maxWidth:100},paddingRight:"4px",paddingTop:8,paddingBottom:8}},{Header:"Metadata",accessor:t=>t.metadata.map((t=>({payload:t}))),Cell:t=>(0,m.tZ)(i.k,{badges:t.value,className:"bg-badge-4",selectedBadges:t.state.globalFilter,onBadgeClick:e=>x(e,t.state.globalFilter,t.setGlobalFilter)}),minWidth:160,maxWidth:250,disableSortBy:!0,columnCSS:{paddingRight:"4px","@media (max-width: 1800px)":{maxWidth:200},"@media (max-width: 1600px)":{maxWidth:140},"@media (max-width: 1500px)":{maxWidth:100},paddingTop:8,paddingBottom:8}},{Header:"Tags",accessor:t=>t.relevant_tags.map((t=>({payload:t}))),Cell:t=>(0,m.tZ)(i.k,{badges:t.value,selectedBadges:t.state.globalFilter,onBadgeClick:e=>x(e,t.state.globalFilter,t.setGlobalFilter)}),columnCSS:{minWidth:700,"@media (max-width: 2000px)":{minWidth:500},"@media (max-width: 1900px)":{minWidth:400},"@media (max-width: 1800px)":{minWidth:300},"@media (max-width: 1700px)":{minWidth:250},"@media (max-width: 1600px)":{minWidth:100},"@media (max-width: 1500px)":{minWidth:80},"@media (max-width: 1400px)":{minWidth:50},paddingRight:24,paddingTop:8,paddingBottom:8},disableSortBy:!0}]),[x]),Z=(0,r.useMemo)((()=>(0,m.tZ)("h1",{children:"Something went wrong..."})),[]),B=(0,r.useCallback)((t=>{a((e=>(0,v.ZP)(e,(e=>{var a;e.runData=null==(a=t.globalFilter)?void 0:a.join(";")}))))}),[a]),N=(0,r.useCallback)(((t,a)=>{const n=e.filter((t=>t));return Object.assign({},t,{globalFilter:n})}),[e]),W=(0,r.useMemo)((()=>{var t;return{globalFilter:(null==(t=n.runData)?void 0:t.split(";"))||e}}),[e,n.runData]),k=(0,r.useMemo)((()=>(0,m.tZ)(i.$j,{className:"h-[82vh]"})),[]),_=n.pageSize?parseInt(n.pageSize):25,j=n.page?parseInt(n.page):parseInt(S.page||"1");return(0,m.BX)("div",{children:[(0,m.tZ)(i.iA,{columns:D,data:(null==p?void 0:p.results)||[],emotionBaseTableCSS:y,spinner:k,isFetching:g,isError:h,errorComponent:Z,globalFilter:w,globalFilterValue:e,initialState:W,onStateChange:B,useControlledState:N,autoResetSortBy:!1,headerShadow:!0}),(0,m.tZ)("div",{className:"grid mt-1 place-items-center",children:p&&(0,m.tZ)(i.tl,{totalCount:p.pagination.count,pageSize:_,currentPage:j,siblingCount:2,onPageChange:t=>{c((e=>(0,v.ZP)(e,(e=>{e.startDate=n.startDate||S.startDate,e.page=t.toString()}))))},onPageSizeChange:t=>{c((e=>(0,v.ZP)(e,(e=>{e.pageSize=t.toString()}))))}})})]})};var N=a(21373),W=a(61661),k=a(2524),_=a(41874),j=a.n(_);const F=t=>{const{onFormChange:e,initialValues:a}=t,[n,s]=(0,r.useState)(a),[,u]=(0,d.XN)(),p=(0,l.I0)(),g=(0,o.Ky)(o.rm);(0,r.useEffect)((()=>{s(Object.assign({},n,{runData:g}))}),[g]);return(0,m.BX)(m.HY,{children:[(0,m.BX)("div",{className:"flex gap-4",children:[(0,m.tZ)(i.Dw,{onChange:t=>{if(Array.isArray(t)&&t[0]&&t[1]){const[e,a]=t,i=Object.assign({},n,{startDate:e.toDate()||null,finishDate:a.toDate()||null});s(i)}},defaultValue:[null,j()()],ranges:{"One week":[j()((0,W.Z)(new Date,-1)),j()()],"Two weeks":[j()((0,W.Z)(new Date,-2)),j()()],"One month":[j()((0,k.Z)(new Date,-1)),j()()],"Three months":[j()((0,k.Z)(new Date,-3)),j()()],"Six months":[j()((0,k.Z)(new Date,-6)),j()()],"One year":[j()((0,k.Z)(new Date,-12)),j()()]}}),(0,m.tZ)(i.XZ,{onBadgesChange:t=>{const e=Object.assign({},n,{runData:t});p((0,o.AP)(t)),s(e)},badges:n.runData}),(0,m.tZ)(i.E1,{placeholder:"Tag expression",onChange:t=>{s(Object.assign({},n,{runDataExpr:t.target.value}))},value:n.runDataExpr})]}),(0,m.BX)("div",{className:"flex gap-4",children:[(0,m.tZ)("button",{className:"grid w-10 h-10 rounded-md place-items-center text-text-menu bg-bg-body hover:text-primary",onClick:()=>{const t={startDate:void 0,finishDate:void 0,runData:void 0,runDataExpr:void 0};s({startDate:null,finishDate:null,runData:[],runDataExpr:""}),p((0,o.AP)([])),u(t)},"aria-label":"Reset form",children:(0,m.tZ)(c.P.GarbageBin24x24,{})}),(0,m.tZ)(i.zx,{variant:"primary",onClick:()=>e(n),children:"Submit"})]})]})},P=()=>{const t=(0,l.I0)(),[e,a]=(0,d.XN)();(0,r.useEffect)((()=>{e.runData&&t((0,o.AP)(e.runData.split(";")))}),[t,e]);const n=(0,r.useMemo)((()=>{var t;return{startDate:e.startDate?new Date(e.startDate):null,finishDate:e.finishDate?new Date(e.finishDate):new Date,runData:(null==(t=e.runData)?void 0:t.split(";"))||[],runDataExpr:e.runDataExpr||""}}),[e]);return(0,m.tZ)(F,{onFormChange:t=>{const e=t.startDate?(0,D.Z)(t.startDate,N.yJ):"",n=t.finishDate?(0,D.Z)(t.finishDate,N.yJ):"";a({startDate:e,finishDate:n,runData:t.runData.join(";"),runDataExpr:t.runDataExpr,page:"1"})},initialValues:n})},I=()=>(0,m.tZ)("header",{className:"flex items-center justify-start gap-4 px-6 py-4 bg-white rounded-t-xl",children:(0,m.tZ)("div",{className:"flex items-center gap-10",children:(0,m.tZ)(P,{})})}),R=()=>((0,n.jr)("Runs - Bublik "),(0,m.BX)("div",{className:"flex flex-col gap-1 px-2 py-2",children:[(0,m.tZ)(I,{}),(0,m.tZ)(B,{}),(0,m.tZ)(i.uv,{})]}))}}]);